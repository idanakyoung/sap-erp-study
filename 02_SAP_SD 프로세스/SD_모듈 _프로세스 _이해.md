# 📘 2. SD 모듈 프로세스 이해

---
![image](https://github.com/user-attachments/assets/9fde770d-d8dd-4fd2-9850-da717aa19562)

## 🔍 a. 사전영업활동 (Pre-Sales Activities)

판매 주문처리 이전의 영업활동으로 **고객정보분석**, **고객상담/문의**, **견적활동**, **경쟁사 및 경쟁제품 관련 정보 관리** 등이 포함됨.  
> 주문처리 과정에서 중요한 정보원이 될 수 있으며, 고객과의 지속적인 관계를 유지하기 위한 기초자료로 활용될 수 있다.  
> *(고객정보분석 → 고객관계관리 CRM)*

### 🗣️ 고객상담/문의 (Inquiry)
- 고객은 **문의 후 구입 의무 없이** 제품 또는 서비스에 대한 정보나 견적서를 요청함
- 판매회사는 이를 **시스템에 기록 및 유지관리**
- ✔ 제품 가격리스트  
- ✔ 가용성 점검  
- ✔ 납품 가능일 점검

### 🧾 견적 (Quotation)
- 고객이 문의한 제품/서비스에 대해 정식 주문 전 **공식 제안문서** 제공
- **특정 유효 기간 내에서 법적 효력** 가짐
- **입력 데이터**: 견적유형, 판매처, 자재, 납품요청일, 효력발생일, 견적효력발생일 등  
- 🔍 **고객마스터**, **자재마스터**, **조건마스터**에서 데이터 참조

---

## 📝 b. 판매주문처리 (Sales Order Entry)

고객 요청 또는 견적 승인 시 이를 참조하여 **판매주문 생성**  
→ 주문처리 시 **구매/자재, 생산, 회계 등과 실시간 연동**

### 🧾 영업오더 (Sales Order)

- 고객이 사고자 하는 제품이나 서비스에 대해 **납품일자, 주문수량 등**을 기록한 **영업문서**
- 주요 포함 정보  
  ✔ 고객 정보  
  ✔ 자재 정보  
  ✔ 가격 조건  
  ✔ 일정라인 및 납품 관련 정보  
  ✔ 대금청구 정보
  
![image](https://github.com/user-attachments/assets/0f52c8a2-eeb3-45a5-b358-c91f8170c657)

---


#### 📑 영업주문유형 (Sales Document Type)

> 주문 입력 이후 **업무 처리 방식 또는 기준이 달라짐**을 의미

| 유형 | 설명 |
|------|------|
| 🛒 **일반판매 (정상주문)** | 재고(Make-to-stock) 또는 주문생산(Make-to-order) 방식의 제품/상품 판매 |
| 💵 **현금판매** | 주문과 동시에 **대금이 지불**되는 경우 |
| ⚡ **긴급판매** | **배달지시서가 즉시 생성**되어 출하 작업 진행 |
| 🏪 **위탁판매** | 제품이 위탁상에 이동되고, **실제 고객에 판매 시 매출 발생** |
| 🎁 **무상출고** | 제품을 **가격 없이 출고**할 때 사용 |
| 🔁 **반품** | 판매된 제품을 고객이 **반품 처리**하는 경우 |
| 🧾 **매출조정** | 제품 이동 없이 **회계상 매출 조정**이 필요한 경우 |

---

#### 🤝 계약과 주문

- **계약(Contract)**: 구매자와 판매자 **양쪽을 구속하는 법적 문서**
- **주문(Order)**: 구매자가 필요한 제품, 가격, 납품일 등을 요청한 문서  
→ 판매자가 이를 수락하면 하나의 **계약**으로 성립

✅ 대부분 기업은 **주문장으로 계약 성립**하지만, 일괄계약처럼 포괄적 계약 후  
세부 납품은 별도 주문으로 처리하기도 함 → 이때의 주문은 **Release Order(주문지시서)**

##### 📃 일괄계약 (Contract)
- 고객과 **특정 기간 내 수량/가격** 등을 약속
- 출하 위해서는 **별도 주문 생성 필요**
- SAP ERP에서는 **정상주문(Standard Order)**으로 등록된 일괄계약을 참조하여 처리
- **판매수량/금액 기준 가격 할인 정책**에 유리함

##### 📆 납품일정계획 (Scheduling Agreement)
- 계약 내 **자세한 납품 일정**을 포함한 주문 유형
- **별도 주문 없이** 계획된 일정에 따라 **자동 출하지시 처리**

---

#### 🧱 판매주문 구조 (Sales Document Structure)

- 판매주문 문서는 다음 세 가지 구성요소로 이루어짐:

| 구성 요소 | 설명 |
|------------|------|
| 📄 **헤더 (Header)** | 전체 주문에 대한 공통 정보 (고객명, 오더 유형 등) |
| 📦 **항목 (Item)** | 개별 제품 또는 서비스에 대한 세부정보 (수량, 자재번호 등) |
| 📅 **일정라인 (Schedule Line)** | 납품 일정, 가용성, 납품 수량 등을 포함 |

> 이 구조를 통해 SD 프로세스의 **정확한 재고 확인**, **납품 계획**, **회계처리 연계**가 가능함

---

### 💳 여신점검 (Credit Check)

- 주문 생성 시 **고객 여신한도 잔액 확인**, 정상처리 또는 보류 여부 결정
- **판매오더, 출하, 아웃바운드 납품 시 여신관리 적용**
- 예시: 고객 여신한도 1,000만 원 → 초과 시 에러 메시지(alarm) 발생

#### 🧮 여신한도 사용액 계산식
 총여신액 = 채권잔액
  + 특별부채 (선수금, 어음 등)
  + 대금 미청구액
  + 미결 납품액
  + 미결 주문액

- ➡️ 이 총합이 여신한도 초과 시 **초과 처리**
- ➡️ 여신한도 차감 대상 주문액은 **재고 할당 완료된 부분만 해당**

#### 📊 여신현황 (SAP 화면 예시 및 용어)

- ▶ **특별부채 반영**
  - 정상 만기 미도래 어음 입금액: (+) 반영 + 총채권 감소
  - 선수금 입금: (–) 반영
  - 채권잔고 = ② + ③

- ▶ **여신/채권 항목 의미**
  - ① 여신한도: 고객에게 부여한 총 여신한도
  - ② 총채권: 발생된 채권액 중 미수채권
  - ③ 특별부채: 미도래 어음액 or 선수금 입금액
  - ④ 매출환산가치: 재고 할당된 미출 주문액 or 출고 후 대금청구 미실행액
  - ⑤ **여신한도 사용액 = ② + ③ + ④**

---

### 📦 재고조달 (Inventory Sourcing)

- 🔄 **재고조달 방법**
  - 생산오더, 구매오더
  - Make-to-order 생산
  - 외부 업체로부터 조달
  - 다른 창고로부터 조달

- 🎯 설명: 고객 주문 충족을 위해  
  > “재고를 만들 것인가? 구매할 것인가?”  
  → 재고 있으면 활용, 없으면 조달 결정

---

### ✅ 가용성 점검 (ATP Check)

- 고객 요청 납품일자에 **주문 수량 납품 가능 여부 확인**
- 가능한 경우 **판매오더에 재고 할당**

#### 🧮 ATP 수량 공식
- ATP = 현재고 수량 – 출고 예정 수량 + 입고 예정 수량


- ▪ 출고 예정 수량: 판매주문으로 예약된 수량  
- ▪ 입고 예정 수량: 생산입고 예정  
- ▪ 특정 일자 재고 있으면 **출고 예정 수량으로 할당**

#### 📊 재고 유형
- 가용재고
- 품질검사 중 재고
- 보류재고 (반품 등)

#### 🗂️ 재고관리 수준
- 클라이언트 전체
- 회사 코드 단위
- 플랜트(Plant)
- 저장위치(Storage Location)
- 특별재고

#### 🔍 재고 조회 코드
- `MMBE`: 단일 품목
- `MB52`: 복수 품목

---

## 🚚 출하 및 운송 (Shipping and Transportation)

### 🧾 Outbound Delivery (납품)

- 납품 단계  
  1. 납품문서 생성 (Delivery Doc.)  
  2. Picking (Transfer Order 생성)  
  3. Packing  
  4. Goods Issue (출고전기)

- 납품문서 생성: **출하활동 시작**  
- 자동창고 사용 시 **Transfer Order 필요**
- Batch 또는 Split Valuation 시 관련 필드 처리 필요

---

### 🚛 아웃바운드 납품문서 (Outbound Delivery Doc/Order)

- 고객 주문에 대한 **납품 지시 문서**
- 전체 출하 프로세스를 대표

- 📦 **피킹 (Picking)**  
  창고 → 출하 위치 이동 + 실제 출하 수량 확정

- 📋 **이전오더 (Transfer Order)**  
  피킹 제품 목록화 문서

- 🔁 **주문 결합/분할 납품 기능**
  - 여러 주문 → 하나의 납품으로 묶기
  - 하나의 주문 → 여러 납품으로 분할 가능

---

### 📦 패킹 / 포장 (Packing)

- 창고에서 제품을 출하 위치로 이동  
- 실물 출하 수량 확정

---

### 📤 출고전기 (Posting Goods Issue)

- **출고(Goods Issue)**: 실제 제품이 공장 밖으로 나감
- **출고전기**: 실물 출하 신호  
→ **매출원가 확정**

#### 📌 출고전기의 효과
1. 재고 수량 감소  
2. 재고 평가 금액 변동  
3. 납품 요구 수량 감소  
4. 영업주문, 납품문서 상태 갱신  
5. 대금청구 대상 리스트 생성

---

## 💰 대금청구 (Billing)

- 출고전기 완료 후 **고객 청구금액 확정 + 송장 발행**
- 매출 확정 + 수익성 기록

### 🧾 Billing 주요 작업
- Invoice 작성  
- 차변대변 메모 생성 (CR/DR Requests)  
- Billing Cancel  
- 회계부문 전송

#### 💡 설명
- Invoice 생성 후 세금계산서는 별도 출력  
- 대금청구 취소 → 거래 종료 가능

### ⚙️ 주요 기능
1. **통합/분할 청구**  
2. **채권/여신 관리 연계**  
3. **회계 연동**

#### 📌 통합·분할 Billing 예시
- 여러 출하건 → 하나의 Billing
- 하나의 출하건 → 여러 Billing  
(월 단위로 묶는 것도 가능)

---

### 🧾 Billing의 효과

1. 매출 기록 회계문서 생성  
2. 관련 문서 상태 업데이트  
3. 고객 여신 기록 갱신  
4. **영업정보시스템(SIS)** 매출통계 갱신  
5. 수익성 분석 등 **관리회계 자료** 갱신

---

## 🧾 문서 흐름 (Document Flow)

- 판매오더, 납품, 대금청구 등의 **전체 흐름 추적**

---

### 설명
1. 하나의 영업문서 = R/3 트랜잭션  
2. 연결된 문서 사슬 = **문서 흐름(Document Flow)**  
3. 선행문서 복사로 수작업/오류 감소  
4. 문서번호 더블클릭 → 해당 문서 상세 조회 가능



